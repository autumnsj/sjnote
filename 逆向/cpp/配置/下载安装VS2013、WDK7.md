1、下载安装VS2013、WDK7.6\
1.
VS2013：https://www.visualstudio.com/zh-cn/downloads/download-visual-studio-vs.aspx\
2.
WDK7.6：https://msdn.microsoft.com/zh-cn/windows/hardware/hh852365.aspx连这\
3. 安装就不用说了吧，连这都搞不定，就放弃吧！！！\
2、配置环境变量\
在系统中新建一个环境变量WDKPATH，值为WDK7.6的安装路径，如：\
WDKPATH=x:\\WinDDK\\7600.16385.1\
配置环境变量\
3、VS2013配置\
1. 打开VS2013新建一个空项目

新建空项目\
2. 右键项目，选择属性

选择属性\
3.
打开配置管理器，分别新建Win7_Free、Win7_Check、WinXP_Free、WinXP_Check，关闭

新建配置\
4. 设置VC++路径\
不同的平台系统之间略有差别，以下是32位下WinXP_Check的配置，其他配置参见最后的VS2013的\
驱动开发模板WinDriver.zip\
可执行文件目录：\$(WDKPATH)\\bin\\x86\\x86;\
包含目录：\$(WDKPATH)\\inc\\ddk;\$(WDKPATH)\\inc\\api;\$(WDKPATH)\\inc\\crt;\
引用目录：\$(WDKPATH)\\lib\\Crt\\i386;\$(WDKPATH)\\lib\\ATL\\i386;\$(WDKPATH)\\lib\\wxp\\i386\
5. C/C++配置\
1） 新建一个C++文件（不新建无C/C++设置选项）\
2） 选择常规，目标文件扩展名：.sys\
3） 选择C/C++，打开所有选项，找到一下配置并修改。\
安全检查：禁用\
将警告视为错误：是\
警告等级：等级3\
调用约定：\_stdcall\
优化：已禁用\
预处理器定义：\_X86\_;\_DDK\_;\_WIN32_WINNT=0x0501;WINVER=0x0501;\_DEBUG;DBG=1\
- \_X86\_：根据平台修改为_X86_或_AMD64\_\
- \_WIN32_WINNT、WINVER：根据系统设置相应的值\
- \_DEBUG;DBG=1：Check版本为_DEBUG;DBG=1，Free版本为_NDEBUG;DBG=0\
4） 选择链接器，打开所有选项，找到一下配置并修改。\
附加选项：/SECTION:INIT,D /IGNORE:4078 /safeseh:no

附加依赖项：ntoskrnl.lib;ndis.lib;Hal.lib;wdm.lib;wdmsec.lib;wmilib.lib\
忽略所有默认库：是\
驱动程序：驱动程序\
入口点：DriverEntry\
启用增量链接：否\
生成清单：否\
生成调试信息：是\
生成映射文件：是\
子系统：本机\
4、测试\
编写一个简单的驱动程序，编译测试。如仍有错误，请自行百度/谷歌解决。\
5、制作项目模板\
选择菜单项 文件-\>导出模板，根据提示填写相应信息导出模板。\
模板修改请参阅Visual Studio 模板\
6、导入模板\
将制作好的模板复制到 目录下，就可以做VS2013的新建项目中看到了。\
7、附件\
VS2013驱动开发项目模板：\
Windows Driver.zip\
5.23KB\
Windows Driver.zip\
93.75KB
