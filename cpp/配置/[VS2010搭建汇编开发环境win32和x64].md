\[VS2010搭建汇编开发环境win32和x64\]\
场景:\
1.
虽然使用MASM32也可以编译运行汇编程序,但是既然装了VS2010,它也能支持编译运行汇编吧.不\
然微软的开发人员难道还不用vs写汇编程序了？\
http://www.masm32.com/\
2.
x64程序是大势所趋,win32(只能支持4G内存)逐渐退出舞台了,所以x64编译汇编也是必然要知道\
的.\
win32项目步骤:\
1.建一个空项目,必须先建空项目,改现成的C++项目为assembler项目可能会造成编译不过.\
2.选中项目右键 "生成自定义",选择MASM生成规则.\
3.选中源文件右键-》添加-》新建项

4.选中项目右键-》属性-》链接器-》系统-》 子系统选
"控制台(SUBSYSTEM:CONSOLE)"\
5.选中项目右键-》属性-》链接器-》高级-》 入口点 填 \"main\"\
6.测试代码编译运行:\
1.

1\. TITLE Add and Subtract (AddSub.asm)\
2.\
3. ; This program adds and subtracts 32-bit integers.\
4. ; Last update: 2/1/02\
5.\
6.\
7. INCLUDELIB kernel32.lib\
8.\
9. .MODEL flat,stdcall\
10.\
11. ;.code\
12. ExitProcess PROTO, ; exit program\
13. dwExitCode:DWORD ; return code\
14.\
15.\
16. .data\
17. .code\
18. main PROC\
19.\
20. mov eax,10000h ; EAX = 10000h\
21. add eax,40000h ; EAX = 50000h\
22. sub eax,20000h ; EAX = 30000h\
23.\
24. push 0h\
25. call ExitProcess\
26.\
27. main ENDP\
28. END main\
7.输出,调试时选择菜单 调试-》窗口-》寄存器 就能看到寄存器值。

x64汇编例子:\
1. 创建过程和win32一样,之后转换为x64配置. 在活动解决方案平台新建
选择x64.

2\.
测试代码，x64和win32的一些Directive不一样了,使用的64位寄存器名也不一样,RAX?,详细不同\
请参考微软说明文档\
1. TITLE Add and Subtract (AddSub.asm)\
2.\
3. ; This program adds and subtracts 32-bit integers.\
4. ; Last update: 2/1/02\
5.\
6. ;.MODEL flat,stdcall x64 not support\
7.\
8. .code\
9. EXTERN ExitProcess:PROC\
10.\
11.\
12. INCLUDELIB kernel32.lib\
13.\
14. .data\
15. .code\
16. main PROC\
17.\
18. mov eax,10000h ; EAX = 10000h\
19. add eax,40000h ; EAX = 50000h\
20. sub eax,20000h ; EAX = 30000h

21.\
22. push 0h\
23. call ExitProcess\
24.\
25. main ENDP\
26. END\
27. ;END main,donot use main\
3.调试\
参考:
http://stackoverflow.com/questions/9319055/visual-c-2010-express-x64-assembly\
https://msdn.microsoft.com/en-us/vstudio/gg697159
https://msdn.microsoft.com/en-\
us/library/hb5z4sxd.aspx http://www.masmforum.com/board/index.php?\
topic=14691.15;wap2 http://blog.csdn.net/natepan/article/details/6781439
